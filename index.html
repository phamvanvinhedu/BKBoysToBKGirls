<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L·ªùi c·∫£m ∆°n ng·∫´u nhi√™n</title>
  <style>
    :root { --glass: rgba(255,255,255,.14); --border: rgba(255,255,255,.24); }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      background: radial-gradient(circle at top, #0b1d4d, #050816 70%, #02040c);
    }

    /* 2 l·ªõp canvas ph·ªß to√†n m√†n h√¨nh */
    canvas{
      position:fixed; inset:0;
      width:100%; height:100%;
      display:block;
      pointer-events:none;
    }

    /* Card hi·ªÉn th·ªã l·ªùi c·∫£m ∆°n */
    .wrap{
      position:relative;
      z-index:5;
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:min(860px, 100%);
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 26px 22px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      text-align:center;
    }
    h1{
      margin:0 0 12px;
      font-size: clamp(22px, 3.2vw, 34px);
      letter-spacing:.2px;
    }
    #msg{
      margin: 10px auto 6px;
      font-size: clamp(20px, 2.6vw, 30px);
      line-height: 1.45;
      font-weight: 700;
      padding: 6px 10px;
      text-shadow: 0 2px 10px rgba(0,0,0,.35);
      word-break: break-word;
    }
    .hint{
      margin-top: 10px;
      font-size: 14px;
      opacity: .9;
    }
    .row{
      margin-top: 16px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    button{
      border:0;
      border-radius: 12px;
      padding: 10px 14px;
      font-size: 15px;
      cursor:pointer;
    }
  </style>
</head>
<body>
  <!-- Canvas ph√°o hoa v√† tuy·∫øt -->
  <canvas id="fireworks"></canvas>
  <canvas id="snow"></canvas>

  <div class="wrap">
    <div class="card">
      <h1>‚ú® L·ªùi c·∫£m ∆°n d√†nh cho B·∫°n ‚ú®</h1>
      <div id="msg">ƒêang t·∫°o l·ªùi c·∫£m ∆°n...</div>

      <div class="row">
        <button id="btnNew">ƒê·ªïi l·ªùi c·∫£m ∆°n</button>
        <button id="btnCopy">Copy</button>
      </div>

      <div class="hint">
        M·ªü link l√† hi·ªán ng·∫´u nhi√™n 1 l·ªùi c·∫£m ∆°n. N·ªÅn c√≥ ph√°o hoa üéÜ v√† tuy·∫øt r∆°i ‚ùÑÔ∏è.
      </div>
    </div>
  </div>

  <script>
    // ====== 20 l·ªùi c·∫£m ∆°n: A1..A20 ======
    const THANKS = [
      "A1","A2","A3","A4","A5",
      "A6","A7","A8","A9","A10",
      "A11","A12","A13","A14","A15",
      "A16","A17","A18","A19","A20"
    ];

    function pickRandom(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    let last = "";
    function showRandomThanks(){
      let t = pickRandom(THANKS);
      if (THANKS.length > 1){
        while (t === last) t = pickRandom(THANKS);
      }
      last = t;
      document.getElementById("msg").textContent = t;
    }

    async function copyText(){
      const text = document.getElementById("msg").textContent.trim();
      try{
        await navigator.clipboard.writeText(text);
        alert("ƒê√£ copy!");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        alert("ƒê√£ copy!");
      }
    }

    document.getElementById("btnNew").addEventListener("click", showRandomThanks);
    document.getElementById("btnCopy").addEventListener("click", copyText);

    // Khi ng∆∞·ªùi nh·∫≠n m·ªü link ‚Üí hi·ªán ng·∫´u nhi√™n 1 l·ªùi
    showRandomThanks();

    // ====== Hi·ªáu ·ª©ng TUY·∫æT R∆†I (canvas snow) ======
    (function snow(){
      const canvas = document.getElementById("snow");
      const ctx = canvas.getContext("2d", { alpha:true });

      let W, H, dpr;
      function resize(){
        dpr = Math.max(1, window.devicePixelRatio || 1);
        W = canvas.width = Math.floor(innerWidth * dpr);
        H = canvas.height = Math.floor(innerHeight * dpr);
        canvas.style.width = innerWidth + "px";
        canvas.style.height = innerHeight + "px";
      }
      window.addEventListener("resize", resize);
      resize();

      const flakes = [];
      const N = 140; // m·∫≠t ƒë·ªô tuy·∫øt
      function rand(min,max){ return min + Math.random()*(max-min); }

      for(let i=0;i<N;i++){
        flakes.push({
          x: rand(0,W),
          y: rand(0,H),
          r: rand(0.8, 2.6) * dpr,
          vy: rand(0.35, 1.3) * dpr,
          vx: rand(-0.25, 0.25) * dpr,
          a: rand(0.5, 0.95)
        });
      }

      function step(){
        ctx.clearRect(0,0,W,H);
        for(const f of flakes){
          f.y += f.vy;
          f.x += f.vx;

          if (f.y > H + 10*dpr) { f.y = -10*dpr; f.x = rand(0,W); }
          if (f.x < -10*dpr) f.x = W + 10*dpr;
          if (f.x > W + 10*dpr) f.x = -10*dpr;

          ctx.globalAlpha = f.a;
          ctx.beginPath();
          ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
          ctx.fillStyle = "#fff";
          ctx.fill();
        }
        ctx.globalAlpha = 1;
        requestAnimationFrame(step);
      }
      step();
    })();

    // ====== Hi·ªáu ·ª©ng PH√ÅO HOA (canvas fireworks) ======
    (function fireworks(){
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d", { alpha:true });

      let W, H, dpr;
      function resize(){
        dpr = Math.max(1, window.devicePixelRatio || 1);
        W = canvas.width = Math.floor(innerWidth * dpr);
        H = canvas.height = Math.floor(innerHeight * dpr);
        canvas.style.width = innerWidth + "px";
        canvas.style.height = innerHeight + "px";
      }
      window.addEventListener("resize", resize);
      resize();

      const particles = [];
      const shells = [];

      function rand(min,max){ return min + Math.random()*(max-min); }
      function pick(arr){ return arr[(Math.random()*arr.length)|0]; }

      // b·∫£ng m√†u ph√°o hoa
      const COLORS = ["#ffd166","#ef476f","#06d6a0","#118ab2","#ffffff","#f4a261","#e9c46a"];

      // v·ªát m·ªù (t·∫°o hi·ªáu ·ª©ng l∆∞u ·∫£nh)
      function fade(){
        ctx.globalCompositeOperation = "source-over";
        ctx.fillStyle = "rgba(0,0,0,0.18)";
        ctx.fillRect(0,0,W,H);
        ctx.globalCompositeOperation = "lighter";
      }

      function launchShell(){
        const x = rand(0.15, 0.85) * W;
        const y = H + 10*dpr;
        shells.push({
          x, y,
          vx: rand(-0.8, 0.8) * dpr,
          vy: rand(-9.5, -7.0) * dpr,
          color: pick(COLORS),
          life: 0,
          burstAt: rand(H*0.18, H*0.45)
        });
      }

      function burst(shell){
        const count = Math.floor(rand(42, 72));
        for(let i=0;i<count;i++){
          const ang = (Math.PI*2) * (i / count) + rand(-0.08,0.08);
          const spd = rand(1.6, 5.2) * dpr;
          particles.push({
            x: shell.x,
            y: shell.y,
            vx: Math.cos(ang)*spd,
            vy: Math.sin(ang)*spd,
            color: shell.color,
            life: rand(45, 85), // frames
            size: rand(1.2, 2.4)*dpr
          });
        }
      }

      // t·ª± ƒë·ªông ph√≥ng ph√°o theo nh·ªãp
      let timer = 0;
      function step(){
        fade();

        // ph√≥ng ph√°o ƒë·ªÅu ƒë·ªÅu (nh·∫π)
        timer++;
        if (timer % 18 === 0) launchShell();

        // update shells
        for(let i=shells.length-1;i>=0;i--){
          const s = shells[i];
          s.life++;
          s.x += s.vx;
          s.y += s.vy;
          s.vy += 0.12 * dpr; // gravity

          // v·∫Ω shell
          ctx.globalAlpha = 0.9;
          ctx.beginPath();
          ctx.arc(s.x, s.y, 2.2*dpr, 0, Math.PI*2);
          ctx.fillStyle = s.color;
          ctx.fill();

          if (s.y <= s.burstAt || s.vy >= 0){
            burst(s);
            shells.splice(i,1);
          }
        }

        // update particles
        for(let i=particles.length-1;i>=0;i--){
          const p = particles[i];
          p.life -= 1;
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.06 * dpr;
          p.vx *= 0.99;
          p.vy *= 0.99;

          const alpha = Math.max(0, p.life / 85);
          ctx.globalAlpha = alpha;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
          ctx.fillStyle = p.color;
          ctx.fill();

          if (p.life <= 0) particles.splice(i,1);
        }

        ctx.globalAlpha = 1;
        requestAnimationFrame(step);
      }

      // kh·ªüi t·∫°o n·ªÅn m·ªù m·ªôt l·∫ßn
      ctx.fillStyle = "rgba(0,0,0,1)";
      ctx.fillRect(0,0,W,H);
      ctx.globalCompositeOperation = "lighter";

      step();

      // cho ph√©p click ƒë·ªÉ n·ªï ph√°o t·∫°i v·ªã tr√≠ click (t√πy ch·ªçn)
      window.addEventListener("click", (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX - rect.left) * dpr;
        const y = (e.clientY - rect.top) * dpr;
        const fakeShell = { x, y, color: pick(COLORS) };
        burst(fakeShell);
      });
    })();
  </script>
</body>
</html>
